<!DOCTYPE html>
<html>

<head>
  <title>Cactusnix</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<link rel="stylesheet" href="https://cactusnix.github.io/css/normalize.css">
<link rel="stylesheet" href="https://cactusnix.github.io/css/base.css">
<link rel="stylesheet" href="https://cactusnix.github.io/css/custom.css">
<link rel="stylesheet" href="https://cactusnix.github.io/css/md.css">
<script src="https://cactusnix.github.io/js/jquery-3.5.1.slim.min.js"></script>
<script src="https://cactusnix.github.io/js/base.js"></script>
<script src="https://cactusnix.github.io/js/clipboard.min.js"></script>
<script src="https://cactusnix.github.io/js/codeBlock.js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-154558247-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag("js", new Date());
  gtag("config", "UA-154558247-1");
</script>
</head>

<body>
  <div class="container center">
    <div class="third-center card header">
  <div class="nav-bar">
    
    <a href="/about" title="">关于</a>
    
    <a href="/posts" title="">归档</a>
    
    <a href="/" title="">首页</a>
    
  </div>
  <h2 class="nav-title">Cactusnix&#39;s Blog</h2>
  <div class="nav-descripiton">Think Different And Just Do It</div>
</div>
    
<div class="single card">
  <h4 class="card-title">iOS 14 小组件 Age Widget - 基于 JSBox</h4>
  <div class="subtitle-part second-center">
    <div>
      <embed class="icon-svg" src="/icons/createTime.svg" type="image/svg+xml" />
      <span>2020-12-04 15:55</span>
    </div>
    <div>
      <embed class="icon-svg" src="/icons/readingTime.svg" type="image/svg+xml" />
      <span>2 mins</span>
    </div>
  </div>
  <div class="small-size">
    
    <span>
      <a href="/categories/%E7%BC%96%E7%A8%8B">"编程"</a>
    </span>
    
    
    <span>
      <a href="/tags/%E5%BC%80%E5%8F%91">#开发</a>
    </span>
    
  </div>
  <div class="divider"></div>
  <div class="content">
    <p>概要: JSBox 开发 Age Widget 小组件.</p>
<h3 id="介绍">介绍</h3>
<blockquote>
<p>此小组件基于 iOS 上的 <a href="https://apps.apple.com/cn/app/jsbox-%E5%AD%A6%E4%B9%A0%E5%86%99%E4%BB%A3%E7%A0%81/id1312014438">JSBox</a> 编程软件开发，JSBox 使用小组件功能需要订阅，具体订阅方式可以自行查看。</p>
</blockquote>
<ol>
<li>
<p>支持 2*2、2*4、4*4 三种大小布局。</p>
</li>
<li>
<p>支持中英文语言切换，需要更改 iOS 系统语言。</p>
</li>
<li>
<p>有两种数据运行模式，第一种是累计模式用于展示某个日期出生的人到今天生活了多久，以年、月、日的形式展示，此处年、月、日是更符合人直觉的时间差值，比如 2019-01-01 13:00:00 距离 2020-12-04 16:23:00 的正确的差值应该是 1 年 11 月 3 天 3 时 23 分，而不是那种默认 365 天一年、30 天一个月计算出来的，同时会展示到今天共计生活了多少周、多少天、多少时。第二种倒计时模式用于展示距离死亡时间还有多少时间，同样以年、月、日的形式展示，也有周、天、时。但有一点遗憾，小组件的刷新机制加上我的能力有限没能实现按秒刷新的机制（iOS14 小组件是没办法按秒刷新的，但是可以通过其他方式）。</p>
</li>
<li>
<p>三种组件布局，小组件就是最基本年、月、日的数据，中组件增加了周、天、日的数据，大组件再增加一年的日历块，方块表示周，圆形表示天，一般来说过去的日历块为深色，未来的日历块为浅色块，具体可以运行查看。</p>
</li>
</ol>
<h3 id="用法">用法</h3>
<ol>
<li>安装 <a href="https://apps.apple.com/cn/app/jsbox-%E5%AD%A6%E4%B9%A0%E5%86%99%E4%BB%A3%E7%A0%81/id1312014438">JSBox</a></li>
<li>下载 <a href="https://xteko.com/redir?name=AgeWidget&amp;url=https://github.com/cactusnix/life-assistant-backend/blob/master/JSBox/AgeWidget/.output/AgeWidget.box">AgeWidget 小组件脚本</a></li>
<li>桌面添加小组件选择 JSBox</li>
<li>编辑小组件选择 AgeWidget 脚本，选取配置正确的 JSON 入参</li>
<li>参数说明:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;cactusnix&#34;</span>,
  <span style="color:#f92672">&#34;birthDate&#34;</span>: <span style="color:#e6db74">&#34;1996/8/1 9:0:0&#34;</span>,
  <span style="color:#f92672">&#34;dateType&#34;</span>: <span style="color:#ae81ff">1</span>,
  <span style="color:#f92672">&#34;deathDate&#34;</span>: <span style="color:#e6db74">&#34;2120/8/1 9:0:0&#34;</span>
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">- name: 必填/string eg: &#34;cactusnix&#34;
- birthDate: 必填/正确/string eg: &#34;1996/8/1 9:0:0&#34;
- dateType: 可选/默认值 0/number, 0 表示累计模式, 1 表示倒计时模式
- deathDate: 可选/默认 80 岁/string, 和 birthday 一样的格式
</code></pre></div><h3 id="运行截图">运行截图</h3>
<p><img src="./small_birth_light.jpg" alt="small birth light">
<img src="./medium_large_birth_light.jpg" alt="medium large birth light">
<img src="./small_birth_dark.jpg" alt="small birth dark">
<img src="./medium_large_birth_dark.jpg" alt="medium large birth dark">
<img src="./small_death_light.jpg" alt="small death light">
<img src="./medium_large_death_light.jpg" alt="medium large death light">
<img src="./small_death_dark.jpg" alt="small death dark">
<img src="./medium_large_birth_dark.jpg" alt="medium large death dark"></p>
  </div>
  <blockquote>
    <p class="smallx-size">
      最后修改于: 2020-12-04 15:55
    </p>
  </blockquote>
  
<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://cactusnix.github.io/css/gitalk.css">
<script src="https://cactusnix.github.io/js/gitalk.min.js"></script>
<script>
  const gitalk = new Gitalk({
    clientID: '[59c714a919dd7940d40e]',
    clientSecret: '[4db1956ff40ae2d360c07d22d5fa9ecd0c1ccbc8]',
    repo: 'cactusnix.github.io',
    owner: 'cactusnix',
    admin: ['cactusnix'],
    id: location.pathname, 
    distractionFreeMode: false 
  });
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
      return;
    }
    gitalk.render('gitalk-container');
  })();
</script>

</div>

    <div class="third-center small-size card footer">
  <span>Copyright &copy; 2017 - 2021</span>
  <span> Powered by <a href="https://gohugo.io/">hugo</a> | Theme by <a href="https://github.com/cactusnix/hugo-theme-cactusnix">cactusnix </a></span>
</div>
  </div>
</body>

</html>